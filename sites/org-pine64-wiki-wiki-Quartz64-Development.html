<html>
	<head>
	</head>
	<body>
		<div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
			<div class="mw-parser-output">
				<p>
					This page documents the current status of software support for the
					<a href="/wiki/Quartz64" title="Quartz64">
						Quartz64
					</a>
					 single-board computer, and provides links to resources to help prospective contributors get started. Information is kept current on a best-effort basis as various patches get accepted into the kernel.
				</p>
				<div class="toc" id="toc">
					<input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
					<div class="toctitle" dir="ltr" lang="en">
						<h2>
							Contents
						</h2>
						<span class="toctogglespan">
							<label class="toctogglelabel" for="toctogglecheckbox">
							</label>
						</span>
					</div>
					<ul>
						<li class="toclevel-1 tocsection-1">
							<a href="#Overview">
								<span class="tocnumber">
									1
								</span>
								<span class="toctext">
									Overview
								</span>
							</a>
							<ul>
								<li class="toclevel-2 tocsection-2">
									<a href="#Upstreaming_Status">
										<span class="tocnumber">
											1.1
										</span>
										<span class="toctext">
											Upstreaming Status
										</span>
									</a>
								</li>
							</ul>
						</li>
						<li class="toclevel-1 tocsection-3">
							<a href="#Current_Status">
								<span class="tocnumber">
									2
								</span>
								<span class="toctext">
									Current Status
								</span>
							</a>
							<ul>
								<li class="toclevel-2 tocsection-4">
									<a href="#Working">
										<span class="tocnumber">
											2.1
										</span>
										<span class="toctext">
											Working
										</span>
									</a>
								</li>
								<li class="toclevel-2 tocsection-5">
									<a href="#Partially_Working">
										<span class="tocnumber">
											2.2
										</span>
										<span class="toctext">
											Partially Working
										</span>
									</a>
								</li>
								<li class="toclevel-2 tocsection-6">
									<a href="#Confirmed_Broken">
										<span class="tocnumber">
											2.3
										</span>
										<span class="toctext">
											Confirmed Broken
										</span>
									</a>
								</li>
								<li class="toclevel-2 tocsection-7">
									<a href="#Needs_Testing">
										<span class="tocnumber">
											2.4
										</span>
										<span class="toctext">
											Needs Testing
										</span>
									</a>
								</li>
							</ul>
						</li>
						<li class="toclevel-1 tocsection-8">
							<a href="#Resources">
								<span class="tocnumber">
									3
								</span>
								<span class="toctext">
									Resources
								</span>
							</a>
							<ul>
								<li class="toclevel-2 tocsection-9">
									<a href="#Repositories">
										<span class="tocnumber">
											3.1
										</span>
										<span class="toctext">
											Repositories
										</span>
									</a>
								</li>
								<li class="toclevel-2 tocsection-10">
									<a href="#Other">
										<span class="tocnumber">
											3.2
										</span>
										<span class="toctext">
											Other
										</span>
									</a>
								</li>
							</ul>
						</li>
						<li class="toclevel-1 tocsection-11">
							<a href="#Board.2FSoC_Documentation">
								<span class="tocnumber">
									4
								</span>
								<span class="toctext">
									Board/SoC Documentation
								</span>
							</a>
							<ul>
								<li class="toclevel-2 tocsection-12">
									<a href="#Booting">
										<span class="tocnumber">
											4.1
										</span>
										<span class="toctext">
											Booting
										</span>
									</a>
									<ul>
										<li class="toclevel-3 tocsection-13">
											<a href="#Boot_Order">
												<span class="tocnumber">
													4.1.1
												</span>
												<span class="toctext">
													Boot Order
												</span>
											</a>
										</li>
										<li class="toclevel-3 tocsection-14">
											<a href="#Bootloader_Flashing">
												<span class="tocnumber">
													4.1.2
												</span>
												<span class="toctext">
													Bootloader Flashing
												</span>
											</a>
										</li>
										<li class="toclevel-3 tocsection-15">
											<a href="#BSP_Image_Layout">
												<span class="tocnumber">
													4.1.3
												</span>
												<span class="toctext">
													BSP Image Layout
												</span>
											</a>
										</li>
									</ul>
								</li>
							</ul>
						</li>
					</ul>
				</div>
				<h2>
					<span class="mw-headline" id="Overview">
						Overview
					</span>
				</h2>
				<h3>
					<span class="mw-headline" id="Upstreaming_Status">
						Upstreaming Status
					</span>
				</h3>
				<table border="1" class="wikitable plainrowheaders">
					<tbody>
						<tr>
							<th scope="col">
								Function
							</th>
							<th colspan="2" scope="col">
								Status
							</th>
							<th scope="col">
								Component
							</th>
							<th scope="col">
								Notes
							</th>
						</tr>
						<tr>
							<th scope="row">
								Video Output
							</th>
							<td colspan="2" style="background:#F99; text-align:center;">
								Needs porting
							</td>
							<td>
								<code>
									rockchipdrm/VOP-v2
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								3D Acceleration
							</th>
							<td style="background:PaleGreen; text-align:center;">
								Linux Mainline
							</td>
							<td style="background:PaleGreen; text-align:center;">
								Upstream Mesa
							</td>
							<td>
								<code>
									panfrost
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								Video Decode
							</th>
							<td style="background:LightYellow; text-align:center;">
								Linux Staging
							</td>
							<td style="background:#F99; text-align:center;">
								Not in ffmpeg
								<sup>
									<a class="external autonumber" href="https://patchwork.ffmpeg.org/project/ffmpeg/list/?series=2898" rel="nofollow">
										[1]
									</a>
								</sup>
							</td>
							<td>
								<code>
									hantro-vpu
								</code>
								, using
								<code>
									v4l2-requests
								</code>
							</td>
							<td>
								Speculative status on this also being hantro, can't find rk35* in drivers/staging/media/
							</td>
						</tr>
						<tr>
							<th rowspan="2" scope="row">
								Audio
							</th>
							<td colspan="2" style="background:#F99; text-align:center;">
								Needs porting
							</td>
							<td>
								<code>
									snd-soc-rockchip-i2s?
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								linux-next
								<sup>
									<a class="external autonumber" href="https://lore.kernel.org/linux-devicetree/20210601140145.GH543307@dell/" rel="nofollow">
										[2]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rk817-codec
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								u-boot
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								Waiting on ATF sources
							</td>
							<td>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								Device Tree
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								Early rk3568 dts in review
							</td>
							<td>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th rowspan="2" scope="row">
								Gigabit Ethernet
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/patch/20210421203409.40717-4-ezequiel@collabora.com/" rel="nofollow">
										[3]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rk3566-gmac
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								linux-next
								<sup>
									<a class="external autonumber" href="https://git.kernel.org/netdev/net-next/c/48e8c6f1612b" rel="nofollow">
										[4]
									</a>
								</sup>
							</td>
							<td>
								<code>
									yt8511-phy
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								IOMMU
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/list/?series=488139" rel="nofollow">
										[5]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rockchip-iommu
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								GPIO
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/list/?series=502977" rel="nofollow">
										[6]
									</a>
								</sup>
							</td>
							<td>
								<code>
									gpio-rockchip
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								pinctrl
							</th>
							<td colspan="2" style="background:PaleGreen; text-align:center;">
								Linux Mainline
							</td>
							<td>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								Thermal Regulation
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/patch/20210421200445.32977-1-ezequiel@collabora.com/" rel="nofollow">
										[7]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rockchip-thermal
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								PCIe
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/patch/20210506023448.169146-1-xxm@rock-chips.com/" rel="nofollow">
										[8]
									</a>
								</sup>
							</td>
							<td>
								<code>
									pcie-dw-rockchip
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								Power Management
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								linux-next
								<sup>
									<a class="external autonumber" href="https://git.kernel.org/pub/scm/linux/kernel/git/mmind/linux-rockchip.git/commit/?h=for-next&amp;id=1782c87b44a0b1a527f01a6a184677c58ccbf9c7" rel="nofollow">
										[9]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rockchip-pm-domain
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th scope="row">
								Voltage Control
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/patch/20210527082453.1447484-3-jay.xu@rock-chips.com/" rel="nofollow">
										[10]
									</a>
								</sup>
							</td>
							<td>
								<code>
									rk3568-pmu-io-voltage-domain
								</code>
							</td>
							<td>
							</td>
						</tr>
						<tr>
							<th rowspan="2" scope="row">
								SPI
							</th>
							<td colspan="2" style="background:LightYellow; text-align:center;">
								In review
								<sup>
									<a class="external autonumber" href="https://patchwork.kernel.org/project/linux-rockchip/list/?series=504183" rel="nofollow">
										[11]
									</a>
								</sup>
							</td>
							<td>
							</td>
							<td>
							</td>
						</tr>
					</tbody>
				</table>
				<h2>
					<span class="mw-headline" id="Current_Status">
						Current Status
					</span>
				</h2>
				<p>
					The following sections give an overview over the current status of different parts of the board. Some parts are waiting on a driver to be written or ported, others only need various adjustments.
				</p>
				<p>
					General performance is poor, this is likely due to the
					<a class="external text" href="https://en.wikipedia.org/wiki/Advanced_Microcontroller_Bus_Architecture" rel="nofollow">
						AHB bus
					</a>
					 running slow, and may require some major rework of the clock layout to get to acceptable speeds.
				</p>
				<h3>
					<span class="mw-headline" id="Working">
						Working
					</span>
				</h3>
				<ul>
					<li>
						eMMC
					</li>
					<li>
						SDMMC0 (SD cards)
					</li>
					<li>
						GMAC (Gigabit Ethernet)
					</li>
					<li>
						USB 2.0
					</li>
					<li>
						SATA 2
					</li>
					<li>
						SATA 3
					</li>
					<li>
						UART
						<ul>
							<li>
								UART 0 (Pi-bus)
							</li>
							<li>
								UART 1 (Bluetooth)
							</li>
							<li>
								UART 2 (Pi-bus, debug)
							</li>
						</ul>
					</li>
					<li>
						Video Decode
						<ul>
							<li>
								VP8
							</li>
						</ul>
					</li>
				</ul>
				<h3>
					<span class="mw-headline" id="Partially_Working">
						Partially Working
					</span>
				</h3>
				<ul>
					<li>
						PCI-Express Controller — everything but devices that need cache coherency (e.g. dGPUs) should work
					</li>
					<li>
						USB 3.0 — at 2.0 speeds only, appears to be due to a PHY configuration issue
					</li>
					<li>
						SDMMC1 (Wi-Fi) — AP6256 working, BL602 needs some work to make it flash firmware
					</li>
					<li>
						I
						<sup>
							2
						</sup>
						C — works but is not yet exposed to the Pi-bus
					</li>
					<li>
						<a class="external text" href="https://developer.arm.com/architectures/system-architectures/system-components/arm-generic-interrupt-controller" rel="nofollow">
							GIC
						</a>
						 — needs errata published by Rockchip to get upstream to add device-specific workarounds
						<sup>
							<a class="external autonumber" href="https://lore.kernel.org/linux-rockchip/CAMdYzYrQ5f-mv_VmTq_CRf9tR=j3mwRpKHNLmPFgCF9whsGFRw@mail.gmail.com/" rel="nofollow">
								[12]
							</a>
						</sup>
					</li>
				</ul>
				<h3>
					<span class="mw-headline" id="Confirmed_Broken">
						Confirmed Broken
					</span>
				</h3>
				<ul>
					<li>
						Nothing!
					</li>
				</ul>
				<h3>
					<span class="mw-headline" id="Needs_Testing">
						Needs Testing
					</span>
				</h3>
				<ul>
					<li>
						GPU — Need a VOP-v2 DRM driver to get display output
					</li>
					<li>
						Battery
					</li>
					<li>
						Audio — Needs I2S driver
					</li>
					<li>
						E-Paper
					</li>
					<li>
						SPI — Needs a driver
					</li>
				</ul>
				<h2>
					<span class="mw-headline" id="Resources">
						Resources
					</span>
				</h2>
				<h3>
					<span class="mw-headline" id="Repositories">
						Repositories
					</span>
				</h3>
				<ul>
					<li>
						BSP based development effort for SPL/U-Boot and Linux
						<ul>
							<li>
								<a class="external free" href="https://gitlab.com/pine64-org/quartz-bsp" rel="nofollow">
									https://gitlab.com/pine64-org/quartz-bsp
								</a>
							</li>
						</ul>
					</li>
					<li>
						Image CI pipeline aimed at developers
						<ul>
							<li>
								<a class="external free" href="https://gitlab.com/pgwipeout/quartz64_ci/" rel="nofollow">
									https://gitlab.com/pgwipeout/quartz64_ci/
								</a>
							</li>
						</ul>
					</li>
					<li>
						Rockchip U-Boot
						<ul>
							<li>
								<a class="external free" href="https://github.com/rockchip-linux/u-boot" rel="nofollow">
									https://github.com/rockchip-linux/u-boot
								</a>
							</li>
						</ul>
					</li>
				</ul>
				<h3>
					<span class="mw-headline" id="Other">
						Other
					</span>
				</h3>
				<ul>
					<li>
						Rockchip-SoC Patchwork Page
						<ul>
							<li>
								<a class="external free" href="https://patchwork.kernel.org/project/linux-rockchip/list/" rel="nofollow">
									https://patchwork.kernel.org/project/linux-rockchip/list/
								</a>
							</li>
						</ul>
					</li>
					<li>
						Rockchip Kernel Mailing List Archive
						<ul>
							<li>
								<a class="external free" href="https://lore.kernel.org/linux-rockchip/" rel="nofollow">
									https://lore.kernel.org/linux-rockchip/
								</a>
							</li>
						</ul>
					</li>
				</ul>
				<h2>
					<span id="Board/SoC_Documentation">
					</span>
					<span class="mw-headline" id="Board.2FSoC_Documentation">
						Board/SoC Documentation
					</span>
				</h2>
				<h3>
					<span class="mw-headline" id="Booting">
						Booting
					</span>
				</h3>
				<h4>
					<span class="mw-headline" id="Boot_Order">
						Boot Order
					</span>
				</h4>
				<p>
					The RK3566 boot ROM will search for a valid ID BLOCK in the following order on the support boot media:
				</p>
				<ul>
					<li>
						SPI NOR flash
					</li>
					<li>
						SPI NAND flash
					</li>
					<li>
						eMMC
					</li>
					<li>
						SD-Card
					</li>
				</ul>
				<p>
					... if this fails, the boot ROM will initialize the USB0 port and wait for a connection from the Rockchip
flash/boot tools.
				</p>
				<h4>
					<span class="mw-headline" id="Bootloader_Flashing">
						Bootloader Flashing
					</span>
				</h4>
				<p>
					As per pgwipeout's
					<a class="external text" href="https://gitlab.com/pine64-org/quartz-bsp/u-boot/-/commit/12d102b86813378af08b086f3b9c13ed8010754c" rel="nofollow">
						commit message
					</a>
					:
				</p>
				<ul>
					<li>
						Make a partition named
						<code>
							uboot
						</code>
						 as partition number 1 at 8 MiB to 16 MiB
					</li>
					<li>
						<code>
							dd if=idblock.bin of=/dev/
							<i>
								&lt;mmc/sd&gt;
							</i>
							 seek=64
						</code>
					</li>
					<li>
						<code>
							dd if=uboot.img of=/dev/
							<i>
								&lt;mmc/sd&gt;
							</i>
							1
						</code>
					</li>
				</ul>
				<h4>
					<span class="mw-headline" id="BSP_Image_Layout">
						BSP Image Layout
					</span>
				</h4>
				
			</div>
		</div>
	</body>
</html>
